###############################################################################
#
# This is the additional jtreg exclude list for SapMachine hotspot tests.
#
# List of tests that should not be run by test/Makefile, for various reasons:
#   1. Does not run with jtreg -samevm mode
#   2. Causes problems in jtreg -samevm mode for jtreg or tests that follow it
#   3. The test is too slow or consumes too many system resources
#   4. The test fails when run on any official build systems
#
# Tests marked @ignore are not run by test/Makefile, but harmless to be listed.
#
# List items are testnames followed by labels, all MUST BE commented
#   as to why they are here and use a label:
#     generic-all   Problems on all platforms
#     generic-ARCH  Where ARCH is one of: sparc, sparcv9, x64, i586, ppc64,
#                   ppc64le, s390x etc
#     OSNAME-all    Where OSNAME is one of: solaris, linux, windows, macosx, aix
#     OSNAME-ARCH   Specific on to one OSNAME and ARCH, e.g. solaris-amd64
#     OSNAME-REV    Specific on to one OSNAME and REV, e.g. solaris-5.8
#
# More than one label is allowed but must be on the same line comma seperated,
# without spaces!
# If there are several lines, the last one is used.
#
# SAP/SapMachine usage notes:
#
# This exclude list is a vehicle only for temporary exclusions of tests
# or exclusions that are caused by infrastrucure specifics.
#
# Our first goal is to fix test issues upstream or at least open upstream
# bugs and get the test excluded via the upstream exclusion list.
#
# This list is refreshed periodically from an SAP-internal version,
# removing comments which reveal internal URLs, names or hostnames.
#
# It might contain additional test exclusions, specific to the SapMachine build
# and test infrastructure. That section is found at the end of the file.
#
###############################################################################

###############################################################################
# Failing new tests, unsupported new features in jdk12

# SapMachine 2019-01-08
# Could not reserve enough space for 131072KB object heap
#
# SapMachine 2023-09-16 Try again
#gc/shenandoah/jvmti/TestHeapDump.java                                                windows-all

# SapMachine 2019-02-08
# SapMachine 2019-08-29 Fails in SapMachine 13 and 14
#
# Failing for Shenandoah and 32g heaps.
# SapMachine 2023-09-16 Try again
#runtime/CompressedOops/UseCompressedOops.java                                        windows-all

###############################################################################
# Failing new tests, unsupported new features in jdk15

# SapMachine 2020-09-17
# Fails with: RuntimeException: 'Unloaded library with handle' missing from stdout/stderr
# Recurring, 1-2 times a month.
# SapMachine 2023-09-16 Try again
#runtime/logging/loadLibraryTest/LoadLibraryTest.java                                 generic-all

###############################################################################
# New failures detected after GA of 17.0.5 (e.g. seen only in jdk11u-dev after branching 17.0.5 to jdk17u)

# SapMachine 2022-12-30 test has timeouts, vector API is rather slow on ppc
#
# maybe test changes of 8276151 would improve test speed?
#compiler/vectorapi/VectorCastShape64Test.java                                        generic-ppc64,linux-ppc64le

###############################################################################
# Failing new tests, unsupported new features in jdk19

# SapMachine 2022-01-19: test fails since 12/2021 (since 8259610 ?)
compiler/vectorapi/reshape/TestVectorReinterpret.java                                linux-ppc64le,aix-ppc64

# SapMachine 2022-06-15 Vector API Timeout
compiler/vectorapi/VectorRebracket128Test.java#ZSinglegen                            linux-ppc64le,aix-ppc64
compiler/vectorapi/VectorRebracket128Test.java#ZGenerational                         linux-ppc64le,aix-ppc64

# SapMachine 2022-06-15 Loom
#vmTestbase/nsk/jvmti/GetThreadInfo/thrinfo001/TestDescription.java                    linux-ppc64le
#vmTestbase/nsk/jvmti/RedefineClasses/StressRedefineVirtual/StressRedefineVirtual.java linux-ppc64le

###############################################################################
# Failing new tests, unsupported new features in jdk20

# SapMachine 2022-12-14: Test needs an additional JDK19? We do not want to provide that during our test runs.
runtime/cds/appcds/dynamicArchive/TestAutoCreateSharedArchiveUpgrade.java            generic-all

###############################################################################
# Failing new tests, unsupported new features in jdk21

# SapMachine 2023-06-06
#
gtest/GTestWrapper.java                                                              aix-ppc64
runtime/jni/getCreatedJavaVMs/TestGetCreatedJavaVMs.java                             aix-ppc64
runtime/NMT/JcmdScale.java                                                           aix-ppc64
runtime/Thread/TestAlwaysPreTouchStacks.java                                         aix-ppc64

# SapMachine 2023-06-06
#
runtime/Shutdown/ShutdownTest.java                                                   aix-ppc64
runtime/posixSig/TestPosixSig.java                                                   aix-ppc64
vmTestbase/vm/mlvm/mixed/stress/java/findDeadlock/TestDescription.java               aix-ppc64

###############################################################################
# Tests known to be failing in SapMachine due to SapMachine specific setup.

# SapMachine 2018-10-05
# This test fails, because we do not have debug symbols available in all tests.
runtime/NMT/CheckForProperDetailStackTrace.java                                      generic-all

# SapMachine 2019-01-30 These tests fail for some reason on linux-ppc64le. Need to investigate.
gc/g1/humongousObjects/TestHumongousClassLoader.java                                 linux-ppc64le
gc/g1/humongousObjects/TestHumongousNonArrayAllocation.java                          linux-ppc64le

#SapMachine 2019-07-14 Lately, we see this sporadically...
#Should be analysed, but we exclude it for now because it's tier1
runtime/Safepoint/TestAbortVMOnSafepointTimeout.java                                 generic-all

# SapMachine 2020-06-18 This test fails on our macOS machines due to the SAP specific DNS
serviceability/jvmti/8036666/GetObjectLockCount.java                                 macosx-all

# SapMachine 2022-12-16 Exclude some failing tests
runtime/ErrorHandling/SecondaryErrorTest.java#id1                                    linux-ppc64le
runtime/jni/daemonDestroy/TestDaemonDestroy.java                                     windows-all

# SapMachine 2023-04-14 This test seems to be failing in our CI
runtime/ErrorHandling/TestDwarf.java                                         8305489 linux-i586,linux-x64
